$sky: #D9F1FB;
$land: #EAE2D7;
$gold: gold;
$dark_gold: goldenrod;
$white: ghostwhite;
$beige: beige;
$grey: grey;
$green: #a0a11c;
$brown: #d9a628;
$black: #2e2e2e;

$tan: #FBF9EE;
$hydrant: #B5332B;

$offwhite: #F5F7FA;
$mint: #48CFAD;

html, body {
  height: 100%;
}

body {
  position: relative;
  margin: 0;
}

select {
  border: none;
  outline: none;
}

button {
  outline: none;
  border: none;
  cursor: pointer;
}

body, button {
  font-family: 'Oswald', sans-serif;
  font-weight: 300;
}

/* LANDSCAPE */
.sky, .land {
  position: relative;
}

.sky {
  background-color: $sky;
  height: 14em;
}

.land {
  background-color: $land;
  min-height: 30em;
}

.sun {
  position: relative;
  left: 24em;
  background: rgba(238, 255, 0, 0.904);

  height: 0;
  width: 0;
  padding: 2em;

  border-radius: 50%;
  border: .8em solid rgba(248, 223, 0, 0.925);
}

/* CLOUDS */
.clouds {

  .cloud {
    position: absolute;

    .base {
      position: absolute;
      top: 2em;
      left: -1.5em;

      height: 1.6em;
      width: 8em;
      background-color: $white;
      border-radius: 1em;
      box-shadow: inset -2.2em 0 0 $beige;
    }

    .big_bubble {
      border: 2.5em solid $beige;
    }

    .small_bubble {
      position: absolute;
      top: 1em;
      left: -0.1em;
      border: 1.5em solid ghostwhite;
    }

    .small_bubble, .big_bubble {
      height: 0;
      width: 0;
      border-radius: 50%;
      transform: rotate(45deg);
      border-bottom-color: transparent;
      border-right-color: transparent;
    }

    &:nth-child(1) {
      top: 1.5em;
      left: 13em;
      transform: scale(1.2);
    }

    &:nth-child(2) {
      top: 1em;
      left: 33em;
      transform: scale(1.1, .9);
    }

    &:nth-child(3) {
      top: .6em;
      left: 48em;
    }

    &:nth-child(4) {
      top: 1em;
      left: 62em;
      transform: scale(1.1);
    }

    &:nth-child(5) {
      top: 2em;
      left: 78em;
      transform: scale(1.1, .9);
    }

    &:nth-child(6) {
      top: 1em;
      left: 88em;
      transform: scale(0.8);
    }

    &:nth-child(7) {
      top: 1em;
      left: 1em;
      transform: scale(0.8);
    }

    &:nth-child(9) {
      top: 1em;
      left: 1em;
      transform: scale(0.7);
    }
  }
}

/* MOUNTAINS */
.mountains {

  // to hide overflow, not vital
  overflow: hidden;
  position: relative;
  height: 10em;

  .mountain {
    position: absolute;
    bottom: -4em;

    height: 10em;
    width: 10em;
    transform: rotate(45deg);

    border-top-left-radius: 14%;
    border-top-right-radius: 80% 20%;
    border-bottom-left-radius: 20% 80%;

    // wow, firefox order matters
    background: linear-gradient(45deg, darken($grey, 5%) 50%, transparent 50%) no-repeat,
    linear-gradient(-45deg, transparent 50%, darken($grey, 5%) 50%) 0 90px no-repeat,
    linear-gradient(135deg, $grey 57.5%, transparent 57.5%) no-repeat;
    // background-size: 57.5%, 57.5%, 100%;

    // larger mountains
    &:nth-child(1), &:nth-child(5), &:nth-child(7), &:nth-child(10), &:nth-child(11) {
      transform: rotate(45deg) scale(1.2);
    }

    // green mountains
    &:nth-child(3), &:nth-child(7), &:nth-child(9) {
      background: linear-gradient(45deg, darken($green, 5%) 50%, transparent 50%) no-repeat,
      linear-gradient(-45deg, transparent 50%, darken($green, 5%) 50%) 0 90px no-repeat,
      linear-gradient(135deg, $green 57.5%, transparent 57.5%) no-repeat;
      // background-size: 57.5%, 57.5%, 100%;
    }

    &:nth-child(2) {
      left: 16em;
    }

    &:nth-child(3) {
      left: 8em;
    }

    &:nth-child(4) {
      left: 45em;
    }

    &:nth-child(5) {
      left: 35em;
    }

    &:nth-child(6) {
      left: 60em;
    }

    &:nth-child(7) {
      left: 55em;
    }

    &:nth-child(8) {
      left: 73em;
    }

    &:nth-child(9) {
      left: 77em;
    }

    &:nth-child(10) {
      left: 87em;
    }

    &:nth-child(11) {
      left: 93em;
    }
  }
}

/* TREES */
.tree {

  background: darken(#408B0C, 5%);
  box-shadow: inset 1em 0 0 #408B0C;
  border-radius: 1em;
  height: 5em;
  width: 2em;

  &:nth-child(4n) {
    background: darken(#de8949, 5%);
    box-shadow: inset 1em 0 0 #de8949;
  }

  .branch {
    border: .2em solid #563D3D;
    width: .8em;
    height: .8em;
    transform: rotate(45deg);
    border-top: 0;
    border-left: 0;

    position: relative;

    &:before, &:after {
      content: '';
      height: 0.175em;
      width: 0.175em;
      background-color: #563D3D;
      border-radius: 50%;
      position: absolute;
    }

    &:after {
      right: -0.178125em;
      top: -0.11875em;
    }

    &:before {
      left: -0.11875em;
      bottom: -0.178125em;
    }
  }

  .branch:nth-child(1) {
    position: absolute;
    top: 35%;
    left: 25%;
  }

  .branch:nth-child(2) {
    position: absolute;
    top: 60%;
    left: 25%;
  }

  .shadow {
    height: .5em;
    width: 1.5em;
    background: rgba(198, 198, 198, 0.5);
    border-radius: 50%;
    position: absolute;
    bottom: -2.2em;
    left: 10%;
    z-index: -1;

    transition: width 1s;

    &.blown {
      width: 2.5em;
    }
  }

  .trunk {
    background-color: #563D3D;
    height: 5.5em;
    width: .25em;
    border-radius: 0.5em;
    position: absolute;
    bottom: -2em;
    left: 42%;
  }

  transition: transform 1s;
  &.blown {
    transition: transform 1s;
    transform: scale(.7) skewX(-5deg) !important;
    .shadow {
      width: 2.5em;
    }
  }

}


.trees {
  position: relative;
  z-index: 0; // these trees should be in the back

  .tree {
    position: absolute;
    top: -3em;
    transform: scale(.7);


    &:nth-child(1) {
      left: 18em;
      top: -3.2em;
    }

    &:nth-child(2) {
      left: 33em;
      top: -3.5em;
    }

    &:nth-child(3) {
      left: 24em;
    }

    &:nth-child(4) {
      left: 45em;
    }

    &:nth-child(5) {
      left: 35em;
    }

    &:nth-child(6) {
      left: 66em;
    }

    &:nth-child(7) {
      left: 55em;
      top: -3.6em;
    }

    &:nth-child(8) {
      left: 73em;
    }

    &:nth-child(9) {
      left: 75em;
      top: -3.1em;
    }

    &:nth-child(10) {
      left: 83em;
      top: -2.8em;
    }

    &:nth-child(11) {
      left: 89em;
    }
  }
}

/* INTERFACE */
button {
  background: yellow;
  font-size: 14px;
  border-radius: 1px;
  padding: 2px 8px 3px 8px;

  &:active {
    background-color: yellowgreen;
  }
}

.board .tree {
    position: absolute;
    transform: scale(.7);  
}

.blink {
  animation: blink 1s steps(2, start) infinite;
}

@keyframes blink{to{background-color: yellowgreen;}}

.inkdot {    
    animation-name: inkdot;    
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}

@keyframes inkdot {
    0% { transform: scale(0); }
    100% { transform: scale(1); }
}

.info {
  position: absolute;
  bottom: 0;
}

.start, .change_map, .difficulty {
  position: absolute;
  left: -4em;
  z-index: 10;
}

.start {  
  top: 0;
}

.change_map {
  top: 2.2em;
}

.difficulty {
  top: 4.4em;
  font-size: 14px;
  background-color: silver;
}

.level {
    display: inline-block;
    padding: .125em;
}

.score {
  margin-right: .5em;
}
  
// OVERLAY
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: black;
  opacity: .6;
  filter: alpha(opacity=60);
  z-index: 100;
}

.overlay-box {
  position: fixed;
  top: 10%;
  left: 50%;
  margin-left: -13em;
  z-index: 101;
}

.instructions-box {
  background: #c7baa8;
  border: 9px solid;
  width: 25em;
  height: 20em;
  border-radius: 1px;
  border-color: #f1c40f;
  border-bottom-color: #c29d0b;
  border-right-color: #dab10d;
  color: #66595c;
}

.js-close-overlay {
  cursor: pointer;
  position: absolute;
  left: 92%;
  top: 0%;

  color: #66595c;
}

.instructions {
  border: 1px solid #EAE2D7;
  padding: 1.8em 1em 1em 1em;
  height: 100%;
  box-sizing: border-box;
  font-family: sans-serif;
  line-height: 22px;

  h2 {
    font-family: Oswald, sans-serif;
  }
}

/* BOARD */
.board {  
  display: inline-block; /* instead of overflow */
  padding: 3em 3em 1em 5em;

    .cell {
	    position: relative;
	    float: left;	   

		/* for testing */
	    // border: 1px solid white;
	    // box-sizing: border-box;
    }
}

/* TREE / NODE */
.board {
  .cell {      
    .node, .non {
      position: absolute;
      top: 0;
      left: 0;
      border-radius: 50%;
      z-index: 1;

      // otherwise clicking the node highlights the text
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      cursor: pointer;

      // font / vertical centering
      font-size: 12px;
      height: 2.2em;
      width: 2.2em;
      line-height: 2.2em;
      text-align: center;

      // default color
      background-color: skyblue;

      &.extension {
        background-color: palevioletred;
      }

      &.dead_end {          
        background-color: #424c56;
        display: none;
      }

      &.leaf {
        background-color: forestgreen;
        display: none;
      }
      
      &.root {
        background-color: yellowgreen;
      }

      &.blacknwhite {
        background: #444;
        color: #f9f9f9;
      }          
    }

    // EDGES
    .edge {
      position: absolute;
      opacity: .4;
      

      &.selected {
        opacity: 1;
      }
    }

    // direction are on cell level, this indicates what should show or all would
    &.east, &.west {
      .edge.east, .edge.west {
        background: linear-gradient(0deg, transparent 22%, grey 22%, grey 33%, transparent 33%, transparent 67%, grey 67%, grey 78%, transparent 78%), repeating-linear-gradient(90deg, transparent, transparent .25em, #7B5026 .25em, #7B5026 .5em);
        
        // so it's not on the edge
        top: .35em;
        right: 0;

        // can adjust later if needed
        height: .9em;
        width: 5.6em;

        &.shorter {
          right: 4.6em;
          width: 1em;
        }
      }
    }

    &.south, &.north {
      .edge.south, .edge.north {
        background: linear-gradient(90deg, transparent 22%, grey 22%, grey 33%, transparent 33%, transparent 67%, grey 67%, grey 78%, transparent 78%), repeating-linear-gradient(0deg, transparent, transparent .25em, #7B5026 .25em, #7B5026 .5em);
        
        // so it's not on the edge
        left: .35em;
        bottom: 0;

        // can adjust later if needed
        width: .9em;
        height: 5.6em;
      }
    }

    // curved joints
    &.joint .node {    
        height: 1.5em;
        width: 1.5em;
        top: .7em;
        left: .7em;
      
        background: radial-gradient(transparent 33%, grey 36%, grey 39%, transparent 43%, transparent 57.5%, grey 61.5%, grey 63.5%, transparent 68%);
        background-size: 200% 200%;

        // overrides
        border-radius: 0;
        cursor: auto; // joint isn't clickable 
        display: block;          
    }

    // se is default positioning, this controls positions of the metal part of the rail way
    &.east_to_north, &.north_to_east {
      .node {
        background-position: 0 100%;
        top: 0;
        left: .7em;
      }
    }

    &.west_to_north, &.north_to_west {
      .node {
        background-position: 100% 100%;
        top: 0;
        left: 0;
      }  
    }
    
    &.west_to_south, &.south_to_west {
      .node {
        background-position: 100% 0;
        top: .7em;
        left: 0;
      }
    }

    // straight joints  
    &.south_to_north, &.north_to_south {
      .node {
        display: none;
      }
      .south.edge {
        height: 100%;
      }
    }

    &.east_to_west, &.west_to_east {
      .node {
        display: none;
      }
      .east.edge {
        width: 100%;
      }
    }    
  } // board, cell closing
}

/* PLANKS */
.plank {
  height: 0.25em;
  width: .875em;
  background-color: #7B5026;
  position: absolute;

    &:nth-child(1) {
      transform: rotate(45deg);
      left: 0.6875em;
      top: 0.9375em;
    }

    &:nth-child(2) {
      transform: rotate(22.5deg);
      left: 0.4375em;
      top: 1.3125em;
    }

    &:nth-child(3) {
      transform: rotate(67.5deg);
      left: 1.0625em;
      top: 0.6875em;
    }
}

.west_to_south, .south_to_west {
  .plank:nth-child(1) {
    top: 1em;
    left: 0.0625em;
    transform: rotate(-45deg);
  }

  .plank:nth-child(2) {
    top: 1.3125em;
    left: 0.3125em;
    transform: rotate(-22.5deg);
  }

  .plank:nth-child(3) {
    top: 0.75em;
    left: -0.25em;
    transform: rotate(-67.5deg);
  }
}

.west_to_north, .north_to_west {
  .plank:nth-child(1) {
    transform: rotate(45deg);
    top: 0.375em;
    left: 0.1875em;
  }

  .plank:nth-child(2) {
    transform: rotate(22.5deg);
    top: -0.0625em;
    left: 0.375em;
  }

  .plank:nth-child(3) {
    transform: rotate(67.5deg);
    top: 0.625em;
    left: -0.1875em;
  }
}

.east_to_north, .north_to_east {
  .plank:nth-child(1) {
    transform: rotate(-45deg);
    left: 0.625em;
    top: 0.4375em;
  }

  .plank:nth-child(2) {
    transform: rotate(-22.5deg);
    left: 0.4375em;
    top: 0;
  }

  .plank:nth-child(3) {
    transform: rotate(-67.5deg);
    left: 1.0625em;
    top: 0.6875em;
  }
}

/* HOUSE */
.house.white {
  .roof {
    background: darken(#FAB768, 7%);
  }

  .side {
    background: darken(#D99C65, 7%);
  }

  .front {
    background: darken($tan, 4%);
    &:before {
      border-bottom: 1.625em solid darken($tan, 4%);
    }
  }
}

.house.red {
  .roof {
    background: darken(#B0A69B, 2%);
  }
  .side {
    background: lighten(#A22D26, 4%);
  }

  .front {
    background: lighten($hydrant, 12%);
    &:before {
      border-bottom: 1.625em solid lighten($hydrant, 12%);
    }
  }
}

.house {
  position: relative;
  width: 4.8em;

  .front {
    width: 2.25em;
    height: 2.25em;
    background-color: lighten($brown, 5%);
    position: relative;

    float: left;

    &:before {
      content: '';
      position: absolute;
      height: 0;
      width: 0;
      top: -2.75em;
      border: 1.125em solid transparent;
      border-bottom: 1.625em solid lighten($brown, 5%);
    }
  }

  .side {
    height: 2.25em;
    width: 2.5em;
    background-color: darken($brown, 15%);
    float: left;

    // cheating to get text center
    padding: 0.625em;
    box-sizing: border-box;

    text-align: center;

    color: antiquewhite;
    text-shadow: 0 0 whitesmoke;
    line-height: 1.125em;
  }

  .roof {
    height: 1.625em;
    width: 2.5em;
    transform: skewX(35deg);
    background-color: darken($brown, 7%);

    position: absolute;
    top: -1.625em;
    right: 0.625em;
  }

  .tunnel {
    height: 1.375em;
    width: 1.5em;
    background-color: $black;

    position: absolute;
    left: 0.375em;
    bottom: 0;

    &:before {
      content: '';
      position: absolute;
      top: -0.6875em;
      left: 0;

      width: 0;
      height: 0;
      transform: rotate(45deg);

      border: 0.75em solid transparent;
      border-top-color: $black;
      border-left-color: $black;
      border-radius: 50%;
    }
  }

  // house orientations
  &.west {
    top: -1em;
    left: -0.125em;

    transform: scaleX(-1);
    .side {
      transform: scaleX(-1);
    }
  }

  &.east {
    top: -1em;
  }

  &.north {
    top: -0.625em;
    left: -0.375em;
  }

  &.south {
    left: 2.25em;
    top: -1em;
  }
}

/* DEATH */
.death {
  *,:after,:before{box-sizing:border-box}
  .pull-left{float:left}
  .pull-right{float:right}
  .clearfix:after,.clearfix:before{content:'';display:table}
  .clearfix:after{clear:both;display:block}
}

.death .head .skull:before,
.death .head .skull:after,
.death .eyes .eye:before,
.death .body:before,
.death .body:after,
.death .legs:before{
  content:'';
  position:absolute;
}

.death{
  // need
  width: 30px;
  height: 44px;  

  position: absolute;
  top: -1em;
  left: -0.5em;

  animation: move 5s infinite;
}

.west .death {
  top: -1em;
  left: 0em;
}

.north .death {
  top: -1em;
  left: -0.5em;
}

.death .head {
  z-index:1;
  width:25px;
  height:25px;
  background:#444;
  border-radius:50%;
  position:relative;
}

.death .head .skull {
  left:2px;
  bottom:2px;
  width:16px;
  height:16px;
  color:#f9f9f9;
  border-radius:50%;
  background:#f9f9f9;
  position:absolute;
  animation:skull 5s infinite;
}

.death .head .skull:before {
  top:9px;
  width:0;
  left:50%;
  height:0;
  z-index:1;
  margin-left:-2px;
  border:2px solid transparent;
  border-bottom:2px solid #444;
}

.death .head .skull:after {
  top:14px;
  left:50%;
  width:1px;
  height:4px;
  margin-left:-1px;
  background:#f9f9f9;
  box-shadow: 2px 0,-2px 0,4px 0,-4px 0,
  -3px -2px,-1px -2px,1px -2px,3px -2px
} 
.death .eyes {
  width:inherit;
  height:inherit;
  overflow:hidden;
  border-radius:50%;
  position:relative;
}

.death .eyes .eye {
  top:5px;
  width:5px;
  height:5px;
  position:absolute;
  border-radius:50%;
  background:#f8cd22;
  border:1px solid #444;
  border-right:2px solid #444;
}

.death .eyes .eye:before {
  top:-1px;
  left:-1px;
  width:5px;
  height:3px;
  background:#f9f9f9;
  border-radius:5px 5px 0 0;
  animation:eyes 5s infinite;
}
.death .eyes .eye.eye-left{
  left:1px;
}
.death .eyes .eye.eye-right{
  right:1px;
}
.death .body{
  top:-3px;
  width:24px;
  height:17px;
  background:#444;
  position:relative;
  border-radius:10px 10px 2px 2px;
}
.death .body:before,
.death .body:after{
  top:3px;
  width:4px;
  height:12px;
  background:#444;
}
.death .body:before{
  left:-1px;
  border-radius:100% 0 0 2px;
  transform:rotate(10deg);
  animation:hand-left 5s infinite;
}
.death .body:after{
  right:-1px;
  border-radius:0 100% 2px 0;
  transform:rotate(-10deg);
  animation:hand-right 5s infinite;
}
.death .legs{
  top:-3px;
  left:50%;
  width:21px;
  height:10px;
  overflow:hidden;
  margin-left:-13px;
  position:relative;
  border-bottom:1px solid rgba(0,0,0,.2);
}
.death .legs:before{
  top:0;
  left:-7px;
  width:60px;
  height:10px;
  background-image:linear-gradient(-495deg, #444 4px,transparent 0), linear-gradient(-45deg, transparent 4px, #444 0);
  background-size:4px 8px;
  background-repeat:repeat-x;
  animation:legs 5s infinite;
}

@keyframes move{
  0%{
    transform:translateX(0)
  }
  50%{
    transform:translateX(15px)
  }
  100%{
    transform:translateX(0)
  }
}
@keyframes skull{
  0%{
    transform:translate(0,0)
  }
  25%{
    transform:translate(2px,1px)
  }
  75%{
    transform:translate(3px,-1px)
  }
  100%{
    transform:translate(0,0)
  }
}
@keyframes eyes{
  0%{
    top:-5px;
    border-radius:50%;
  }
  50%{
    top:-1px;
    border-radius:5px 5px 0 0;
  }
  100%{
    top:-5px;
    border-radius:50%;
  }
}
@keyframes legs{
  0%{
    left:-7px;
  }
  50%{
    left:-25px;
  }
  100%{
    left:-7px;
  }
}
@keyframes hand-left{
  0%{
    left:1px;
  }
  50%{
    left:-2px;
  }
  100%{
    left:1px;
  }
}
@keyframes hand-right{
  0%{
    right:1px;
  }
  50%{
    right:-2px;
  }
  100%{
    right:1px;
  }
}

/* CLOUD ANIMATIONS */
.sky .clouds .cloud {

  animation-name: drift;
  animation-timing-function: linear;
  animation-iteration-count: infinite;

  &:nth-child(1) {
    animation-duration: 90s;
    animation-delay: -8s ;
    z-index: 1;
  }

  &:nth-child(2) {
    animation-duration: 94s;
    animation-delay: -45s ;
    z-index: 1;
  }

  &:nth-child(3) {
    animation-duration: 90s;
    animation-delay: -80s ;
  }

  &:nth-child(4) {
    animation-duration: 92s;
    animation-delay: -21s ;
    z-index: 1;
  }

  &:nth-child(5) {
    animation-duration: 95s;
    animation-delay: -30s ;
  }

  &:nth-child(6) {
    animation-duration: 90s;
    animation-delay: -65s ;
  }

  &:nth-child(7) {
    animation-duration: 98s;
    animation-delay: -4s ;
  }

  &:nth-child(8) {
    animation-duration: 95s;
    animation-delay: -78s ;
    z-index: 1;
  }

  &:nth-child(9) {
    animation-duration: 95s;
    animation-delay: -60s ;
  }
}

@keyframes drift {
  0% {
    left: -8em;
  }

  100% {
    left: 103em;
  }
}

/* TRAIN */
// TRAIN by itself
.train, .pilot, .stack, .engine, .wheels {
  box-sizing: border-box;
}

.train {
  //  position: relative;
  z-index: 2;

  // only place kinda
  width: 2.5em;
  height: 2.5em;

  // space for the yellow top, do I need this anymore?
  margin-top: .125em;

  .destination {
    font-size: .75em;
    text-align: center;
    font-weight: 400;
    line-height: 1.2em;
  }

  .pilot {
    width: 60%;
    height: 60%;
    float: left;
    
    background: linear-gradient(45deg, #e3f3ff, #bddcee) 0 0.3em;
    border: 0.1875em solid darkseagreen;
    border-bottom-width: .5em;
    border-right-width: .4em;

    position: relative;
    &:before {
      content: '';
      position: absolute;

      height: .125em;
      width: 1.75em;
      background: #f3cb00;
      top: -0.3125em;
      left: -0.3125em;
    }
  }

  .stack, .engine {
    height: 30%;
    width: 40%;
    float: right;
  }

  .stack {
    position: relative;
    &:before {
      content: '';
      position: absolute;
      height: .625em;
      width: .625em;
      top: 0.1875em;
      left: 0.1875em;
      border: .125em solid transparent;
      border-top-color: darkgrey;
      border-top-width: 0.1875em;
      border-left-width: 0.1875em;
      border-right-width: 0.1875em;
      border-bottom-width: 0;
      box-sizing: border-box;
      background: linear-gradient(to right, darkseagreen 50%, transparent 50%);
      background-size: 200%;
    }
  }

  .engine {
    background: darkseagreen;
    border-top-right-radius: 70% 50%;
    border-bottom-right-radius: 10%;
  }

  .wheels {
    position: relative;
    /* this looks weird as em */
    top: -4px;
    left: 1px;
    height: 40%;

    .wheel {
      position: relative;
      border: .125em solid slategrey;
      height: 0.5625em;
      width: 0.5625em;
      border-radius: 50%;
      float: left;

      .spoke {
        //background-color: #a76d33;
        background-color: rgba(95, 70, 34, 0.49);
        position: absolute;
        top: 0;
        left: 4px;
        width: 1px;
        height: 100%;

        // spokes going in all directions
        &:nth-child(1) {
          transform: rotate(0deg);
        }

        &:nth-child(2) {
          transform: rotate(45deg);
        }

        &:nth-child(3) {
          transform: rotate(90deg);
        }

        &:nth-child(4) {
          transform: rotate(-45deg);
        }
      }
    }
  }
}

/* TRAINS ANIMATIONS */
// ANIMATIONS
.train {
  position: absolute;
  animation-timing-function: linear;
  animation-fill-mode: forwards;

  // changes in javascript
  animation-duration: 4s;

  // this is important!
  transform-origin: 10px 30px;

  // ORIENTATIONS of the train, only orientation 0deg is unaffected by transform-origin, all rotations affected
  // transform-origin absorbs 6px move
  &.to_east {
    top: -16px;
    left: 6px;
  }

  &.to_south {
    top: -16px;
    left: 0px;

    transform: rotate(90deg);

    .destination {
      transform: rotate(270deg);
    }
  }

  &.to_west {
    top: -22px;

    left: 0px; //orig
    left: 116px; // oops shift over 116px

    transform: rotate(180deg);

    .destination {
      transform: rotate(180deg);
    }
  }

  &.to_north {
    left: 6px;

    top: -22px; //orig
    top: 94px; // oops shift over 116px

    transform: rotate(270deg);

    .destination {
      transform: rotate(90deg);
    }
  }

}

// COMMONALITY, 93px is .8 * 116px (116px width of a cell) (.8 is 80% where the animation turn starts)
@keyframes to_east {
  100% {
    left: 99px;
  }
}

@keyframes to_south {
  100% {
    top: 77px;
  }
}

@keyframes to_west {
  100% {
    left: 23px;
  }
}

@keyframes to_north {
  100% {
    top: 1px;
  }
}

// TURNING CLOCKWISE
@keyframes east_to_south {
  0% {
    left: 99px;
    transform: rotate(0deg);
  }

  100% {
    left: 116px;
    transform: rotate(90deg);
  }
}

@keyframes south_to_west {
  0% {
    top: 77px;
    transform: rotate(90deg);
  }

  100% {
    top: 94px;
    transform: rotate(180deg);
  }
}

@keyframes west_to_north {
  0% {
    left: 23px;
    transform: rotate(180deg);
  }

  100% {
    left: 6px;
    transform: rotate(270deg);
  }
}

@keyframes north_to_east {
  0% {
    top: 1px;
    transform: rotate(270deg);
  }

  100% {
    top: -16px;
    transform: rotate(360deg);
  }
}

// GOING STRAIGHT
@keyframes east_to_east {
  0% {
    left: 99px;
  }

  100% {
    left: 122px;
  }
}

@keyframes south_to_south {
  0% {
    top: 77px;
  }

  100% {
    top: 100px;
  }
}

@keyframes west_to_west {
  0% {
    left: 23px;
  }

  100% {
    left: 0px;
  }
}

@keyframes north_to_north {
  0% {
    top: 1px;
  }

  100% {
    top: -22px;
  }
}

// TURNING COUNTER CLOCKWISE
@keyframes east_to_north {
  0% {
    top: -16px; // from orientation

    left: 99px;
    transform: rotate(0deg);
  }

  100% {
    top: -22px; // +6 from orientation

    left: 122px;
    transform: rotate(-90deg);
  }
}

@keyframes south_to_east {
  0% {
    left: 0px; // from orientation

    top: 77px;
    transform: rotate(90deg);
  }

  100% {
    left: 6px; // +6 from orientation

    top: 100px;
    transform: rotate(0deg);
  }
}

@keyframes west_to_south {
  0% {
    top: -22px; // from orientation

    left: 23px;
    transform: rotate(180deg);
  }

  100% {
    top: -16px; // + 6 from orientation

    left: 0px;
    transform: rotate(90deg);
  }
}

@keyframes north_to_west {
  0% {
    left: 6px; // from orientation

    top: 1px;
    transform: rotate(270deg);
  }

  100% {
    left: 0px; // +6 from orientation

    top: -22px;
    transform: rotate(180deg);
  }
}

.wheel {
  animation: spin_wheels .3s linear infinite;
}

@keyframes spin_wheels {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(-45deg);
  }
}

/* TUTORIAL */
.pulse {
  animation: pulse 1.5s alternate ease-in infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  100% { transform: scale(1.5); }
}

@keyframes flash {
  0% { opacity: 1; }
  100% { opacity: .5; }
}

.radiate {
  animation: flash 1s alternate infinite, pulse 2s alternate infinite;
}

.faded {
  opacity: .3 !important;
}

.tutorial_message {
  width: 8em;
  padding: 1em;
  position: absolute;
  top: -6.25em;
  left: -0.5em;
  background: $land;
  text-shadow: 1px 1px #d7d7de;
  border-radius: .25em;
}

/* SCORE */
.chewy {
  font-family: 'Chewy', cursive;
  position: absolute;
  left: 2em;
  z-index: 4;
  color: #f3cd33;

  &.red {
    color: #bf4233;
  }
}

.puff_1 {
  animation: puff_1 6s forwards;
}

.puff_2 {
  animation: puff_2 6s forwards;
}

.puff_3 {
  animation: puff_3 6s forwards;
}

@keyframes puff_1 {
  0% {
    transform: translate(0, 0) scale(0);
    opacity: 0;    
  }

  30% {
    opacity: 1;  
  }

  100% {    
    opacity: 0;
    transform: translate(-20px, -80px) scale(2.35);
  }
}

@keyframes puff_2 {
  0% {
    transform: translate(0, 0) scale(0);
    opacity: 0;    
  }

  30% {
    opacity: 1;  
  }

  100% {    
    opacity: 0;
    transform: translate(-60px, -60px) scale(2.35);
  }
}

@keyframes puff_3 {
  0% {
    transform: translate(0, 0) scale(0);
    opacity: 0;    
  }

  30% {
    opacity: 1;  
  }

  100% {    
    opacity: 0;
    transform: translate(40px, -80px) scale(2.35);
  }
}

.ending-overlay {
  margin-left: -10.875em;
  top: 40%;

  // prevents box from closing on accidental click
  padding: 4em;
  padding-top: 0em;

  .headline {
      text-shadow: 2px 2px #7b8188;
      font-size: 2em;
      text-align: center;

      span {
        padding: 0.1em;
      }
  }

  .message {
    color: $offwhite;
    margin-top: 0;
    min-width: 13.75em;
    text-align: center;
  }

  .accuracy {
      color: $mint;
      font-size: 0.8em;
      text-align: right;
  }

  .close {    
    color: $offwhite;
  }

  .js-close-overlay {
    top: -12%;
    left: 78%;
  }
}  

.centered {
    margin: auto;
    display: block;
}  


.wrapper {
  overflow: hidden;
}